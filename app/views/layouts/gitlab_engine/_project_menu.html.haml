%nav.main_menu
  = link_to @project.code, gitlab_engine.project_path(@project), :class => "home #{project_tab_class}", :title => "Project"
  - if @project.repo_exists?
    - if can? current_user, :download_code, @project
      = link_to gitlab_engine.tree_project_ref_path(@project, @project.root_ref), :class => tree_tab_class do
        Files
      = link_to "Commits", gitlab_engine.project_commits_path(@project), :class => commit_tab_class

    = link_to "Network", gitlab_engine.graph_project_path(@project), :class => current_page?(:controller => "projects", :action => "graph", :id => @project) ? "current" : nil
    - if @project.issues_enabled
      = link_to  gitlab_engine.project_issues_path(@project), :class => issues_tab? ? "current" : nil do
        Issues
        %span.count= @project.issues.opened.count
    - if @project.merge_requests_enabled
      = link_to gitlab_engine.project_merge_requests_path(@project), :class => (controller.controller_name == "merge_requests") ? "current" : nil do
        Merge Requests
        %span.count= @project.merge_requests.opened.count

    - if @project.wall_enabled
      = link_to gitlab_engine.wall_project_path(@project), :class => wall_tab? ? "current" : nil do
        Wall

    - if @project.wiki_enabled
      = link_to gitlab_engine.project_wiki_path(@project, :index), :class => (controller.controller_name == "wikis") ? "current" : nil do
        Wiki
